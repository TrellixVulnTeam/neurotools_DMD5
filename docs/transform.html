<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="Title" href="test.html" /><link rel="prev" title="stats" href="stats.html" />

    <meta name="generator" content="sphinx-4.2.0, furo 2022.04.07"/>
        <title>transform - neurotools 0.2 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?digest=68f4518137b9aefe99b631505a2064c3c42c9852" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">neurotools 0.2 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  
  <span class="sidebar-brand-text">neurotools 0.2 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="loading.html">loading</a></li>
<li class="toctree-l1"><a class="reference internal" href="misc.html">misc</a></li>
<li class="toctree-l1"><a class="reference internal" href="plotting.html">plotting</a></li>
<li class="toctree-l1"><a class="reference internal" href="random.html">random</a></li>
<li class="toctree-l1"><a class="reference internal" href="rely.html">rely</a></li>
<li class="toctree-l1"><a class="reference internal" href="resample.html">resample</a></li>
<li class="toctree-l1"><a class="reference internal" href="stats.html">stats</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">transform</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="test.html">Title</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container"><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="transform">
<h1>transform<a class="headerlink" href="#transform" title="Permalink to this headline">#</a></h1>
<section id="surflabels">
<h2>SurfLabels<a class="headerlink" href="#surflabels" title="Permalink to this headline">#</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="neurotools.transform.rois.SurfLabels">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">neurotools.transform.rois.</span></span><span class="sig-name descname"><span class="pre">SurfLabels</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">labels</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">background_label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strategy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'mean'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vectorize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#neurotools.transform.rois.SurfLabels" title="Permalink to this definition">#</a></dt>
<dd><p>Extract signals from non-overlapping labels for surface data.</p>
<p>This class functions similar to <a class="reference external" href="https://nilearn.github.io/modules/generated/nilearn.input_data.NiftiLabelsMasker.html#nilearn.input_data.NiftiLabelsMasker" title="(in Nilearn)"><code class="xref py py-class docutils literal notranslate"><span class="pre">NiftiLabelsMasker</span></code></a>,
except is designed to work with surface data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>labels</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em> or </em><em>array-like</em>) – This should represent an array, of the same size as the data
dimension, as a mask with unique integer values for each ROI.
You can also pass a str location in which to load in this array.
Anything accepted by <a class="reference internal" href="loading.html#neurotools.loading.load" title="neurotools.loading.load"><code class="xref py py-func docutils literal notranslate"><span class="pre">load</span></code></a> is acceptable here.</p></li>
<li><p><strong>background_label</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>, </em><em>array-like of int</em><em>, </em><em>optional</em>) – <p>This parameter determines which label, if any,
in the corresponding passed labels,
should be treated as ‘background’ and therefore no ROI
calculated for that value or values.
You may pass either a single interger
value, an array-like of integer values.</p>
<p>If not background label is desired, just pass
a label which doesn’t exist in any of the data,
e.g., -2.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">default</span> <span class="o">=</span> <span class="mi">0</span>
</pre></div>
</div>
</p></li>
<li><p><strong>mask</strong> (<a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><em>None</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em> or </em><em>array-like</em><em>, </em><em>optional</em>) – <p>This parameter allows you to optional pass a mask of values in
which to not calculate ROI values for.
This can be passed as a str or
array-like of values (just like labels),
and should be comprised of
a boolean array (or 1’s and 0’s),
where a value of 1 means that value
will be ignored (set to background label)
should be kept, and a value of 0,
for that value should be masked away.
This array should have the same length as the passed <cite>labels</cite>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">default</span> <span class="o">=</span> <span class="kc">None</span>
</pre></div>
</div>
</p></li>
<li><p><strong>strategy</strong> (<em>specific str</em><em>, </em><em>custom_func</em><em>, </em><em>optional</em>) – <p>This parameter dictates the function to be applied
to each data’s ROI’s
individually, e.g., mean to calculate the mean by ROI.</p>
<p>If a str is passed, it must correspond to one of the below preset
options:</p>
<ul>
<li><dl class="simple">
<dt>’mean’</dt><dd><p>Calculate the mean with <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.mean.html#numpy.mean" title="(in NumPy v1.22)"><code class="xref py py-func docutils literal notranslate"><span class="pre">numpy.mean()</span></code></a></p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>’sum’</dt><dd><p>Calculate the sum with <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.sum.html#numpy.sum" title="(in NumPy v1.22)"><code class="xref py py-func docutils literal notranslate"><span class="pre">numpy.sum()</span></code></a></p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>’min’ or ‘minimum</dt><dd><p>Calculate the min value with <code class="xref py py-func docutils literal notranslate"><span class="pre">numpy.ndarray.min()</span></code></p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>’max’ or ‘maximum</dt><dd><p>Calculate the max value with <code class="xref py py-func docutils literal notranslate"><span class="pre">numpy.ndarray.max()</span></code></p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>’std’ or ‘standard_deviation’</dt><dd><p>Calculate the standard deviation with <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.std.html#numpy.std" title="(in NumPy v1.22)"><code class="xref py py-func docutils literal notranslate"><span class="pre">numpy.std()</span></code></a></p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>’var’ or  ‘variance’</dt><dd><p>Calculate the variance with <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.var.html#numpy.var" title="(in NumPy v1.22)"><code class="xref py py-func docutils literal notranslate"><span class="pre">numpy.var()</span></code></a></p>
</dd>
</dl>
</li>
</ul>
<p>If a custom function is passed, it must accept two arguments,
custom_func(X_i, axis=data_dim), X_i, where X_i is a subjects data
array where that subjects data corresponds to
labels == some class i, and can potentially
be either a 1D array or 2D array, and an axis argument
to specify which axis is
the data dimension (e.g., if calculating for a time-series
[n_timepoints, data_dim], then data_dim = 1,
if calculating for say stacked contrasts where
[data_dim, n_contrasts], data_dim = 0, and lastly for a 1D
array, data_dim is also 0.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">default</span> <span class="o">=</span> <span class="s1">'mean'</span>
</pre></div>
</div>
</p></li>
<li><p><strong>vectorize</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a><em>, </em><em>optional</em>) – <p>If the returned array should be flattened to 1D. E.g., if the
last step in a set of loader steps this should be True, if before
a different step it may make sense to set to False.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">default</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>
</div>
</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="#neurotools.transform.rois.SurfMaps" title="neurotools.transform.rois.SurfMaps"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SurfMaps</span></code></a></dt><dd><p>For extracting non-static / probabilistic parcellations.</p>
</dd>
<dt><a class="reference external" href="https://nilearn.github.io/modules/generated/nilearn.input_data.NiftiLabelsMasker.html#nilearn.input_data.NiftiLabelsMasker" title="(in Nilearn)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">nilearn.input_data.NiftiLabelsMasker</span></code></a></dt><dd><p>For working with volumetric data.</p>
</dd>
</dl>
</div>
</dd></dl>
</section>
<section id="surfmaps">
<h2>SurfMaps<a class="headerlink" href="#surfmaps" title="Permalink to this headline">#</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="neurotools.transform.rois.SurfMaps">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">neurotools.transform.rois.</span></span><span class="sig-name descname"><span class="pre">SurfMaps</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">maps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strategy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'auto'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vectorize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#neurotools.transform.rois.SurfMaps" title="Permalink to this definition">#</a></dt>
<dd><p>Extract signals from overlapping labels for surface data.</p>
<p>This class functions similar to <a class="reference external" href="https://nilearn.github.io/modules/generated/nilearn.input_data.NiftiMapsMasker.html#nilearn.input_data.NiftiMapsMasker" title="(in Nilearn)"><code class="xref py py-class docutils literal notranslate"><span class="pre">NiftiMapsMasker</span></code></a>,
except it is designed to work with surface projected data, instead of 3D/4D Nifti files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>maps</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em> or </em><em>array-like</em><em>, </em><em>optional</em>) – <p>This parameter represents the maps in which
to apply to each surface, where the shape of
the passed maps should be (# of features, # of maps)
or in other words, the size of the data array in the first
dimension and the number of maps
(i.e., the number of outputted ROIs from fit)
as the second dimension.</p>
<p>You may pass maps as either an array-like,
or the str file location of a numpy or other
valid surface file format array in which to load.
Anything accepted by <a class="reference internal" href="loading.html#neurotools.loading.load" title="neurotools.loading.load"><code class="xref py py-func docutils literal notranslate"><span class="pre">load</span></code></a> is acceptable here.</p>
</p></li>
<li><p><strong>strategy</strong> (<em>{'auto'</em><em>, </em><em>'ls'</em><em>, </em><em>'average'}</em><em>, </em><em>optional</em>) – <p>The strategy in which the maps are used to extract
signal. If ‘ls’ is selected, which stands for
least squares, the least-squares solution will
be used for each region.</p>
<p>Alternatively, if ‘average’ is passed, then
the weighted average value for each map
will be computed.</p>
<p>By default ‘auto’ will be selected,
which will use ‘average’ if the passed
maps contain only positive weights, and
‘ls’ in the case that there are
any negative values in the passed maps.</p>
<p>Otherwise, you can set a specific strategy.
In deciding which method to use,
consider an example. Let’s say the
fit data X, and maps are</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>
<span class="n">maps</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                 <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                 <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">],</span>
                 <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">]])</span>
</pre></div>
</div>
<p>In this case, the ‘ls’ method would
yield region signals [2.5, -2.5], whereas
the weighted ‘average’ method, would yield
[5, 5], notably ignoring the negative weights.
This highlights an important limitation to the
weighted averaged method, as it does not
handle negative values well.</p>
<p>On the other hand, consider changing the maps
weights to</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>
<span class="n">maps</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
                 <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
                 <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                 <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]])</span>

<span class="n">ls_sol</span> <span class="o">=</span> <span class="p">[</span><span class="mf">5.</span> <span class="p">,</span> <span class="mf">0.6</span><span class="p">]</span>
<span class="n">average_sol</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
<p>In this case, we can see that the weighted
average gives a maybe more intuitive summary
of the regions. In general, it depends on
what signal you are trying to summarize, and
how you are trying to summarize it.</p>
</p></li>
<li><p><strong>mask</strong> (<a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><em>None</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em> or </em><em>array-like</em><em>, </em><em>optional</em>) – <p>This parameter allows you to optional pass a mask of values in
which to not calculate ROI values for.
This can be passed as a str or
array-like of values (just like maps),
and should be comprised of
a boolean array (or 1’s and 0’s),
where a value of 1 means that value
will be ignored (set to 0)
should be kept, and a value of 0,
for that value should be masked away.
This array should have the same length as the passed <cite>maps</cite>.
Specifically, where the shape of maps is (size, n_maps),
the shape of mask should be (size).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">default</span> <span class="o">=</span> <span class="kc">None</span>
</pre></div>
</div>
</p></li>
<li><p><strong>vectorize</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a><em>, </em><em>optional</em>) – <p>If the returned array should be flattened to 1D. E.g., if this is
the last step in a set of loader steps this should be True.
Also note, if the surface data it is being applied to is 1D,
then the output will be 1D regardless of this parameter.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">default</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>
</div>
</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="#neurotools.transform.rois.SurfLabels" title="neurotools.transform.rois.SurfLabels"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SurfLabels</span></code></a></dt><dd><p>For extracting static / non-probabilistic parcellations.</p>
</dd>
<dt><a class="reference external" href="https://nilearn.github.io/modules/generated/nilearn.input_data.NiftiMapsMasker.html#nilearn.input_data.NiftiMapsMasker" title="(in Nilearn)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">nilearn.input_data.NiftiMapsMasker</span></code></a></dt><dd><p>For volumetric nifti data.</p>
</dd>
</dl>
</div>
<p class="rubric">Examples</p>
<p>First let’s define an example set of probabilistic maps, we
will assume there are just 5 features in our data, and we will
define 6 total maps.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="gp">In [2]: </span><span class="kn">from</span> <span class="nn">neurotools.transform</span> <span class="kn">import</span> <span class="n">SurfMaps</span>

<span class="go"># This should have shape number of features x number of maps!</span>
<span class="gp">In [3]: </span><span class="n">prob_maps</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
<span class="gp">   ...: </span>                      <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
<span class="gp">   ...: </span>                      <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
<span class="gp">   ...: </span>                      <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
<span class="gp">   ...: </span>                      <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">]])</span>
<span class="gp">   ...: </span>

<span class="gp">In [4]: </span><span class="n">prob_maps</span><span class="o">.</span><span class="n">shape</span>
<span class="gh">Out[4]: </span><span class="go">(5, 6)</span>
</pre></div>
</div>
<p>Next we can define some input data to use with these maps.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [5]: </span><span class="n">data1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">'float'</span><span class="p">)</span>

<span class="gp">In [6]: </span><span class="n">data1</span>
<span class="gh">Out[6]: </span><span class="go">array([0., 1., 2., 3., 4.])</span>

<span class="gp">In [7]: </span><span class="n">data2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">'float'</span><span class="p">)</span>

<span class="gp">In [8]: </span><span class="n">data2</span>
<span class="gh">Out[8]: </span><span class="go">array([1., 1., 1., 1., 1.])</span>
</pre></div>
</div>
<p>Now let’s define the actual object and use it to transform the data.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [9]: </span><span class="n">sm</span> <span class="o">=</span> <span class="n">SurfMaps</span><span class="p">(</span><span class="n">maps</span><span class="o">=</span><span class="n">prob_maps</span><span class="p">)</span>

<span class="gp">In [10]: </span><span class="n">sm</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">data1</span><span class="p">)</span>
<span class="gh">Out[10]: </span><span class="go"></span>
<span class="go">array([1.42857143, 1.71428571, 2.        , 2.28571429, 2.57142857,</span>
<span class="go">       2.        ])</span>

<span class="gp">In [11]: </span><span class="n">sm</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">data2</span><span class="p">)</span>
<span class="gh">Out[11]: </span><span class="go">array([1., 1., 1., 1., 1., 1.])</span>
</pre></div>
</div>
<p>Okay so what is going on when we transform this data? Basically we are
just taking weighted averages for each one of the defined maps. We could
also explicitly change the strategy from ‘auto’ to ‘ls’ which would
take the least squares solution instead.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [12]: </span><span class="n">sm</span> <span class="o">=</span> <span class="n">SurfMaps</span><span class="p">(</span><span class="n">maps</span><span class="o">=</span><span class="n">prob_maps</span><span class="p">,</span> <span class="n">strategy</span><span class="o">=</span><span class="s1">'ls'</span><span class="p">)</span>

<span class="gp">In [13]: </span><span class="n">data_trans</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">data1</span><span class="p">)</span>

<span class="gp">In [14]: </span><span class="n">data_trans</span>
<span class="gh">Out[14]: </span><span class="go"></span>
<span class="go">array([-0.74074074, -0.24074074,  0.25925926,  0.75925926,  1.25925926,</span>
<span class="go">        0.18518519])</span>
</pre></div>
</div>
<p>While a little less intuitive, the least squares solution allows
us to reverse the feature transformation (although not always exactly)</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [15]: </span><span class="n">sm</span><span class="o">.</span><span class="n">inverse_transform</span><span class="p">(</span><span class="n">data_trans</span><span class="p">)</span>
<span class="gh">Out[15]: </span><span class="go"></span>
<span class="go">array([-1.11022302e-15,  1.00000000e+00,  2.00000000e+00,  3.00000000e+00,</span>
<span class="go">        4.00000000e+00])</span>
</pre></div>
</div>
<p>This can be useful in the say the case of converting back downstream
calculated feature importance to the original data space.</p>
</dd></dl>
</section>
<section id="gen-indv-roi-network">
<h2>gen_indv_roi_network<a class="headerlink" href="#gen-indv-roi-network" title="Permalink to this headline">#</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="neurotools.transform.network.gen_indv_roi_network">
<span class="sig-prename descclassname"><span class="pre">neurotools.transform.network.</span></span><span class="sig-name descname"><span class="pre">gen_indv_roi_network</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">labels</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metric</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'jsd'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vectorize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">discard_diagonal</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#neurotools.transform.network.gen_indv_roi_network" title="Permalink to this definition">#</a></dt>
<dd><p>This function is designed to generate a network
of 1 - distance function between groups of different ROIs.</p>
<p>Specifically, this method calls the function <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.ks_2samp.html#scipy.stats.ks_2samp" title="(in SciPy v1.8.0)"><code class="xref py py-func docutils literal notranslate"><span class="pre">scipy.stats.ks_2samp()</span></code></a>  or
<a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.distance.jensenshannon.html#scipy.spatial.distance.jensenshannon" title="(in SciPy v1.8.0)"><code class="xref py py-func docutils literal notranslate"><span class="pre">scipy.spatial.distance.jensenshannon()</span></code></a> to calculate the distances
between each collection of data points in each pair of ROIs, calculating the
distance between the two distributions. Values are then subtracted from 1,
such that exact distribution matches have value 1, i.e., these are the
strongest connections.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>1D numpy array</em>) – <p>Data at this stage must be a single dimensional
numpy array representing the underlying data in which
the labelled regions correspond to.</p>
<p>For example, this is typically a subject’s neuroimaging
data along with corresponding label file in some ROI space.</p>
</p></li>
<li><p><strong>labels</strong> (<em>1D numpy array</em>) – Labels in the form of a 1D numpy array with the same shape / len
as data. This file should contain integer labels
corresponding to which vertex or data elements belong
to different ROIs.</p></li>
<li><p><strong>metric</strong> (<em>{'jsd'</em><em>, </em><em>'ks'</em><em>, </em><em>'ks_demean'</em><em>, </em><em>'ks_normalize'}</em><em>, </em><em>optional</em>) – <p>The type of distance to compute between points.</p>
<ul>
<li><p>’jsd’ : Use the 1 - Jensen Shannon distance between each rois kde estimated distributions.</p></li>
<li><p>’ks’ : Use the 1 - Kolmogorov–Smirnov distance between distributions.</p></li>
<li><p>’ks_demean’ : Same as ‘ks’, but with each ROI’s points de-meaned.</p></li>
<li><p>’ks_normalize’ : Same as ‘ks’, but with each ROI’s points normalized.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">default</span> <span class="o">=</span> <span class="s1">'jsd'</span>
</pre></div>
</div>
</p></li>
<li><p><strong>vectorize</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a><em>, </em><em>optional</em>) – <p>If True, matrices are reshaped into 1D arrays and only their
flattened lower triangular parts are returned.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">default</span> <span class="o">=</span> <span class="kc">False</span>
</pre></div>
</div>
</p></li>
<li><p><strong>discard_diagonal</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a><em>, </em><em>optional</em>) – <p>If True, the diagonal elements of the calculated matrix are
discarded.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">default</span> <span class="o">=</span> <span class="kc">False</span>
</pre></div>
</div>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>matrix</strong> – Base behavior is a two dimensional array containing the
distances / statistics between
every combination of ROI. If vectorize is True, then
a 1D array is returned instead, and if discard_diagonal
is set, then the diag will be removed as well.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>1/2D numpy array</p>
</dd>
</dl>
</dd></dl>
</section>
<section id="gen-fs-subj-vertex-network">
<h2>gen_fs_subj_vertex_network<a class="headerlink" href="#gen-fs-subj-vertex-network" title="Permalink to this headline">#</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="neurotools.transform.network.gen_fs_subj_vertex_network">
<span class="sig-prename descclassname"><span class="pre">neurotools.transform.network.</span></span><span class="sig-name descname"><span class="pre">gen_fs_subj_vertex_network</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">subj_dr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">modality</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'thickness'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'aparc.a2009s.annot'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metric</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'jsd'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vectorize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">discard_diagonal</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#neurotools.transform.network.gen_fs_subj_vertex_network" title="Permalink to this definition">#</a></dt>
<dd><p>This function is helper function for calling
<a class="reference internal" href="#neurotools.transform.network.gen_indv_roi_network" title="neurotools.transform.network.gen_indv_roi_network"><code class="xref py py-func docutils literal notranslate"><span class="pre">gen_indv_roi_network()</span></code></a>, for data organized in
freesurfer individual subject directory style.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>subj_dr</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – The str location of the subject’s freesurfer
directory in which to generate the ks roi network.</p></li>
<li><p><strong>modality</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>, </em><em>optional</em>) – <p>The name of the modality (e.g., thickness, sulc, area, …)
in which to generate the network. Should
be saved in subdirectory surf with names:
<cite>lh.{modality}</cite> and <cite>rh.{modality}</cite></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">default</span> <span class="o">=</span> <span class="s1">'thickness'</span>
</pre></div>
</div>
</p></li>
<li><p><strong>parc</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>, </em><em>optional</em>) – <dl>
<dt>The name of the label / parcellation file in which</dt><dd><p>to use, as found in subdirectory label with names:
<cite>lh.{parc}</cite> and <cite>rh.{parc}</cite>.</p>
<p>These are concatenated internally with function
<code class="xref py py-func docutils literal notranslate"><span class="pre">merge_parc_hemis()</span></code>.</p>
<p>The default value is to use the destr. parcellation.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">default</span> <span class="o">=</span> <span class="s1">'aparc.a2009s.annot'</span>
</pre></div>
</div>
</dd>
<dt>metric<span class="classifier">{‘jsd’, ‘ks’, ‘ks_demean’, ‘ks_normalize’}, optional</span></dt><dd><p>The type of distance to compute between points.</p>
<ul>
<li><p>’jsd’ : Use the 1 - Jensen Shannon distance between each rois kde estimated distributions.</p></li>
<li><p>’ks’ : Use the 1 - Kolmogorov–Smirnov distance between distributions.</p></li>
<li><p>’ks_demean’ : Same as ‘ks’, but with each ROI’s points de-meaned.</p></li>
<li><p>’ks_normalize’ : Same as ‘ks’, but with each ROI’s points normalized.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">default</span> <span class="o">=</span> <span class="s1">'jsd'</span>
</pre></div>
</div>
</dd>
</dl>
</p></li>
<li><p><strong>vectorize</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a><em>, </em><em>optional</em>) – <p>If True, matrices are reshaped into 1D arrays and only their
flattened lower triangular parts are returned.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">default</span> <span class="o">=</span> <span class="kc">False</span>
</pre></div>
</div>
</p></li>
<li><p><strong>discard_diagonal</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a><em>, </em><em>optional</em>) – <p>If True, the diagonal elements of the calculated matrix are
discarded.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">default</span> <span class="o">=</span> <span class="kc">False</span>
</pre></div>
</div>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p><strong>matrix</strong> – Two dimensional array containing the
1 - Kolmogorov–Smirnov statistic / distances between
every combination of ROI.</p>
<p>If vectorize is True, then a 1D array is returned.</p>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>1/2D numpy array</p>
</dd>
</dl>
</dd></dl>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="test.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Title</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="stats.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">stats</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2021, Sage Hahn
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">transform</a><ul>
<li><a class="reference internal" href="#surflabels">SurfLabels</a></li>
<li><a class="reference internal" href="#surfmaps">SurfMaps</a></li>
<li><a class="reference internal" href="#gen-indv-roi-network">gen_indv_roi_network</a></li>
<li><a class="reference internal" href="#gen-fs-subj-vertex-network">gen_fs_subj_vertex_network</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/scripts/furo.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    </body>
</html>